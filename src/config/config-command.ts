import { SlashCommandBuilder, ChannelType, ChatInputCommandInteraction, Interaction } from "discord.js";

import { helpCommand } from "./helpCommand";
import { randomCommand } from "../commands/random/randomCommand";
import { getAvatarCommand } from "../commands/getAvatar/chooseAvatar";
import { getTodayCommand } from "../commands/today/today";
import { diemthptqgCommand } from "../commands/thptqg/diemthptqg";
import { dictionaryCommand } from "../commands/dictionary/dictionaryCommand";
import { getImageCommand } from "../commands/getImage/getImageCommand";
import { pokemonCommand } from "../commands/pokemon/pokemonCommand";
import { translateCommand } from "../commands/translate/translateCommand";
import { cinestarCommand } from "../commands/cinestar/cinestarCommand";

import { handleMovieTodaySelection } from "../commands/cinestar/handler/handleMovieTodaySelection";
import { handleUpcomingMovieSelection } from "../commands/cinestar/handler/handleUpcomingMovieSelection";

// add command
export const commands = [
    new SlashCommandBuilder()
        .setName('help')
        .setDescription('Hi·ªÉn th·ªã c√°c command hi·ªán c√≥ c·ªßa bot'),

    new SlashCommandBuilder()
        .setName('random')
        .setDescription('Ch·ªçn ng·∫´u nhi√™n m·ªôt m·ª•c t·ª´ danh s√°ch b·∫°n nh·∫≠p')
        .addStringOption(option =>
            option.setName('text')
                .setDescription('Nh·∫≠p c√°c l·ª±a ch·ªçn, c√°ch nhau b·∫±ng d·∫•u ph·∫©y')
                .setRequired(true)
        ),

    new SlashCommandBuilder()
        .setName('avatar')
        .setDescription('Xem avatar')
        .addSubcommand(subcommand =>
            subcommand
                .setName('user')
                .setDescription('Xem avatar c·ªßa ai ƒë√≥')
                .addUserOption(option =>
                    option.setName('user')
                        .setDescription('Ch·ªçn ng∆∞·ªùi d√πng ƒë·ªÉ xem avatar (ƒë·ªÉ tr·ªëng th√¨ xem ·∫£nh c·ªßa b·∫°n)')
                        .setRequired(false)
                )
        )
        .addSubcommand(subcommand =>
            subcommand
                .setName('server')
                .setDescription('Xem avatar c·ªßa server')
        ),

    new SlashCommandBuilder()
        .setName('today')
        .setDescription('Xem ng√†y hi·ªán t·∫°i (d∆∞∆°ng l·ªãch & √¢m l·ªãch)'),

    new SlashCommandBuilder()
        .setName('sbd')
        .setDescription('Tra c·ª©u ƒëi·ªÉm thi THPTQG 2025')
        .addStringOption(option =>
            option.setName('text')
                .setDescription('Nh·∫≠p s·ªë b√°o danh (8 ch·ªØ s·ªë)')
                .setRequired(true)
                .setMaxLength(8)
                .setMinLength(8)
        ),

    new SlashCommandBuilder()
        .setName('dictionary')
        .setDescription('Tra t·ª´ ƒëi·ªÉn ti·∫øng Anh (ƒë·ªãnh nghƒ©a, phi√™n √¢m, t·ª´ ƒë·ªìng nghƒ©a/tr√°i nghƒ©a, ...)')
        .addStringOption(option =>
            option.setName('text')
                .setDescription('Nh·∫≠p t·ª´ ti·∫øng Anh c·∫ßn tra')
                .setRequired(true)
        ),

    new SlashCommandBuilder()
        .setName('image')
        .setDescription("Tr·∫£ v·ªÅ ·∫£nh ng·∫´u nhi√™n")
        .addSubcommand(subcommand =>
            subcommand
                .setName('cat')
                .setDescription('Xem ·∫£nh m√®o ng·∫´u nhi√™n')
        )
        .addSubcommand(subcommand =>
            subcommand
                .setName('dog')
                .setDescription('Xem ·∫£nh ch√≥ ng·∫´u nhi√™n')
        ),

    new SlashCommandBuilder()
        .setName('pokemon')
        .setDescription('Who\'s that Pok√©mon?')
        .addStringOption(option =>
            option.setName('name')
                .setDescription('Nh·∫≠p t√™n Pok√©mon b·∫°n mu·ªën t√¨m (ex: pikachu)')
                .setRequired(false)
        )
        .addStringOption(option =>
            option.setName('id')
                .setDescription('Nh·∫≠p ID Pok√©mon b·∫°n mu·ªën t√¨m (gi√° tr·ªã trong kho·∫£ng 1-1025 ho·∫∑c 10001-10277)')
                .setRequired(false)
        ),

    new SlashCommandBuilder()
    .setName('translate')
    .setDescription('D·ªãch t·ª´ v·ª±ng v√† c√°c c√¢u nh·ªè')
    .addStringOption(option =>
        option.setName('to')
            .setDescription('Ch·ªçn ng√¥n ng·ªØ ƒë√≠ch mu·ªën d·ªãch sang')
            .setRequired(true)
            .addChoices(
                { name: 'üáªüá≥ Ti·∫øng Vi·ªát', value: 'vi' },
                { name: 'üá¨üáß Ti·∫øng Anh', value: 'en' },
                { name: 'üáØüáµ Ti·∫øng Nh·∫≠t', value: 'ja' },
                { name: 'üá∞üá∑ Ti·∫øng H√†n', value: 'ko' },
                { name: 'üá®üá≥ Ti·∫øng Trung', value: 'zh' },
                { name: 'üá´üá∑ Ti·∫øng Ph√°p', value: 'fr' },
                { name: 'üá©üá™ Ti·∫øng ƒê·ª©c', value: 'de' },
            )
    )
    .addStringOption(option =>
        option.setName('text')
            .setDescription('Nh·∫≠p t·ª´ ho·∫∑c c√¢u c·∫ßn d·ªãch (gi·ªõi h·∫°n 1000 k√Ω t·ª±)')
            .setRequired(true)
    ),

    new SlashCommandBuilder()
        .setName('cinestar')
        .setDescription('Xem l·ªãch chi·∫øu phim t·∫°i r·∫°p Cinestar')
        .addSubcommand(subcommand =>
            subcommand
                .setName('today')
                .setDescription('Xem l·ªãch chi·∫øu phim t·∫°i Cinestar h√¥m nay')
                .addStringOption(option =>
                    option.setName('cinema')
                        .setDescription('Ch·ªçn r·∫°p chi·∫øu phim')
                        .setRequired(true)
                        .addChoices(
                            { name: 'üé¨ Cinestar Sinh Vi√™n - TP.HCM', value: 'Cinestar Sinh Vi√™n - TP.HCM' },
                            { name: 'üé¨ Cinestar Qu·ªëc Thanh - TP.HCM', value: 'Cinestar Qu·ªëc Thanh - TP.HCM' },
                            { name: 'üé¨ Cinestar Hai B√† Tr∆∞ng - TP.HCM', value: 'Cinestar Hai B√† Tr∆∞ng - TP.HCM' },
                            { name: 'üé¨ Cinestar Satra - TP.HCM', value: 'Cinestar Satra - TP.HCM' },
                            { name: 'üé¨ Cinestar ƒê√† L·∫°t - L√¢m ƒê·ªìng', value: 'Cinestar ƒê√† L·∫°t - L√¢m ƒê·ªìng' },
                            { name: 'üé¨ Cinestar L√¢m ƒê·ªìng - L√¢m ƒê·ªìng', value: 'Cinestar L√¢m ƒê·ªìng - L√¢m ƒê·ªìng' },
                            { name: 'üé¨ Cinestar Hu·∫ø - TP.Hu·∫ø', value: 'Cinestar Hu·∫ø - TP.Hu·∫ø' },
                            { name: 'üé¨ Cinestar M·ªπ Tho - ƒê·ªìng Th√°p', value: 'Cinestar M·ªπ Tho - ƒê·ªìng Th√°p' },
                            { name: 'üé¨ Cinestar Ki√™n Giang - An Giang', value: 'Cinestar Ki√™n Giang - An Giang' },
                        )
                )
        )
        .addSubcommand(subcommand => 
            subcommand
                .setName('upcoming')
                .setDescription('Hi·ªÉn th·ªã danh s√°ch c√°c phim s·∫Øp chi·∫øu t·∫°i Cinestar')
        ),
];

// export command
export const commandHandlers: Record<string, (interaction: ChatInputCommandInteraction) => Promise<void>> = {
    help: helpCommand,
    random: randomCommand,
    avatar: getAvatarCommand,
    today: getTodayCommand,
    sbd: diemthptqgCommand,
    dictionary: dictionaryCommand,
    image: getImageCommand,
    pokemon: pokemonCommand,
    translate: translateCommand,
    cinestar: cinestarCommand
};

export const handleSelection = {
    select_movie: handleMovieTodaySelection,
    select_upcoming_movie: handleUpcomingMovieSelection,
    // select_movie_cgv: handleSelectionMovieCGV
} as const;
